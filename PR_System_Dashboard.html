<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Documentation</title>
    <style>
        body {font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background-color: #f5f5f5;}
        .container {max-width: 1400px; margin: 0 auto; background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);}
        h1 {color: #1976d2; text-align: center; margin-bottom: 10px;}
        .subtitle {text-align: center; color: #666; margin-bottom: 30px; font-style: italic;}
        .navigation {background-color: #e3f2fd; padding: 15px; border-radius: 5px; margin-bottom: 20px; text-align: center;}
        .navigation a {color: #1976d2; text-decoration: none; margin: 0 15px; font-weight: bold;}
        .navigation a:hover {text-decoration: underline;}
        .info-box {background-color: #fff3e0; padding: 20px; border-radius: 5px; margin: 20px 0; border-left: 4px solid #f57c00;}
        .info-box h3 {margin-top: 0; color: #e65100;}
        .feature-grid {display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 15px;}
        .feature-card {background-color: white; padding: 15px; border-radius: 5px; border: 1px solid #ddd;}
        .feature-card h4 {margin-top: 0; color: #1976d2;}
        table {width: 100%; border-collapse: collapse; margin-top: 15px;}
        th, td {border: 1px solid #ddd; padding: 12px; text-align: left;}
        th {background-color: #1976d2; color: white;}
        tr:nth-child(even) {background-color: #f9f9f9;}
        .mockup {background-color: #f5f5f5; border: 2px solid #1976d2; padding: 20px; margin: 20px 0; border-radius: 5px;}
        .mockup h4 {margin-top: 0; color: #1976d2; text-align: center;}
    </style>
</head>
<body>
    <div class="container">
        <h1>Dashboard Documentation</h1>
        <p class="subtitle">User Interface and Functionality</p>
        
        <div class="navigation">
            <a href="PR_Flow_Master_Overview.html">â† Workflow Overview</a>
            <a href="PR_System_Admin_Backend.html">Admin Backend â†’</a>
            <a href="PR_System_Objects.html">Object Definitions â†’</a>
        </div>

        <div class="mockup">
            <h4>ğŸ“Š Dashboard Layout with Search Analytics</h4>
            <pre style="font-family: monospace; font-size: 12px;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1PWR Procurement System   [Org Selector â–¼] [MY ACTIONS (5)] [+ NEW PR]  ğŸ‘¤â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  KEY METRICS                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Total    â”‚ Urgent   â”‚ Avg Days â”‚ Overdue  â”‚ Quotes   â”‚ Completionâ”‚      â”‚
â”‚  â”‚ PRs: 45  â”‚ PRs: 8   â”‚ Open: 5.2â”‚ PRs: 12  â”‚ Req: 6   â”‚ Rate: 78% â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                             â”‚
â”‚  PURCHASE REQUESTS / PURCHASE ORDERS                                       â”‚
â”‚  Status Filter: [SUBMITTED â–¼]  [Advanced Filters â–¼]     Search: [____] ğŸ” â”‚
â”‚                                                                             â”‚
â”‚  ACTIVE FILTERS:                                                            â”‚
â”‚  [Department: Finance X] [Vendor: ABC Corp X] [Site: Maseru Office X]      â”‚
â”‚  [Date: Jan 2025 X]                                          [Clear All]    â”‚
â”‚                                                                             â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SEARCH RESULTS ANALYTICS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘  ğŸ“Š Number of         ğŸ’° Total             ğŸ“ˆ Average                 â•‘ â”‚
â”‚  â•‘     Transactions         Transaction Value    Transaction Value       â•‘ â”‚
â”‚  â•‘                                                                        â•‘ â”‚
â”‚  â•‘     23                   LSL 87,450.00         LSL 3,802.17           â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PR Number â”‚ Description â”‚ Submitted  â”‚ Status â”‚ Days Openâ”‚ Actions  â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ ğŸ”´ URGENT ITEMS (Oldest First)                                        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 1PL-202   â”‚ Vehicle     â”‚ Jane Smith â”‚ PEND   â”‚ 5 âš ï¸     â”‚ View     â”‚  â”‚
â”‚  â”‚ 510-002   â”‚ Maintenance â”‚            â”‚ APPR   â”‚  URGENT  â”‚          â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 1PL-202   â”‚ Server      â”‚ Bob Jones  â”‚ IN_QUE â”‚ 3 âš ï¸     â”‚ View Editâ”‚  â”‚
â”‚  â”‚ 510-005   â”‚ Hardware    â”‚            â”‚        â”‚  URGENT  â”‚          â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚  â”‚ NORMAL PRIORITY (Oldest First)                                        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 1PL-202   â”‚ Office      â”‚ John Doe   â”‚ SUBMIT â”‚ 2        â”‚ View Editâ”‚  â”‚
â”‚  â”‚ 510-001   â”‚ Supplies    â”‚            â”‚ TED    â”‚          â”‚          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      [Prev] [1] [2] [Next]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </pre>
        </div>

        <div class="info-box" style="background-color: #e3f2fd; border-left-color: #1976d2;">
            <h3>Dashboard Header Components</h3>
            
            <h4>1. Organization Selector</h4>
            <ul>
                <li><strong>Location:</strong> Top center of dashboard</li>
                <li><strong>Function:</strong> Dropdown to select which organization's PRs/POs to view</li>
                <li><strong>Multi-Organization Support:</strong>
                    <ul>
                        <li>Users can be assigned to multiple organizations</li>
                        <li>Dropdown shows all organizations user has access to</li>
                        <li>Switching organization reloads dashboard data for that org</li>
                        <li>All metrics and PRs filtered by selected organization</li>
                    </ul>
                </li>
                <li><strong>Who Sees What:</strong>
                    <ul>
                        <li>Level 1 (Admin): Can see all organizations</li>
                        <li>Other Levels: See primary organization + additional organizations assigned</li>
                    </ul>
                </li>
            </ul>

            <h4>2. MY ACTIONS Button</h4>
            <ul>
                <li><strong>Location:</strong> Top center, next to organization selector</li>
                <li><strong>Availability:</strong> Requestors, Approvers, Finance/Admin, Asset Management (NOT Procurement - they see all)</li>
                <li><strong>Function:</strong> Filters dashboard to show only PRs/POs requiring user's specific action</li>
                <li><strong>What it shows:</strong>
                    <ul>
                        <li><strong>Requestors:</strong> Own PRs in REVISION_REQUIRED status</li>
                        <li><strong>Approvers:</strong> PRs in PENDING_APPROVAL assigned to them</li>
                        <li><strong>Finance/Admin:</strong> POs in APPROVED status needing documents</li>
                        <li><strong>Asset Management:</strong> POs in ORDERED status needing delivery documentation</li>
                    </ul>
                </li>
                <li><strong>Badge:</strong> Shows count of pending actions (e.g., "MY ACTIONS (5)")</li>
                <li><strong>Toggle:</strong> Click again to return to full view</li>
            </ul>

            <h4>3. NEW PR Button</h4>
            <ul>
                <li><strong>Location:</strong> Top right</li>
                <li><strong>Availability:</strong> All users (Level 5 Requester and above)</li>
                <li><strong>Function:</strong> Opens PR creation wizard (3-step process)</li>
                <li><strong>Behavior:</strong> Pre-populates organization from currently selected org</li>
            </ul>

            <h4>4. User Profile Icon</h4>
            <ul>
                <li><strong>Location:</strong> Top right corner</li>
                <li><strong>Dropdown Menu:</strong>
                    <ul>
                        <li>My Profile (view/edit user details)</li>
                        <li>My PRs (filter to show only user's PRs)</li>
                        <li>Settings (user preferences)</li>
                        <li>Admin Dashboard (if Level 1, 2, or 3)</li>
                        <li>Logout</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="info-box">
            <h3>Key Metrics Dashboard</h3>
            <p><strong>Real-time metrics calculated for selected organization:</strong></p>
            
            <table>
                <tr>
                    <th>Metric</th>
                    <th>Calculation</th>
                    <th>Purpose</th>
                </tr>
                <tr>
                    <td><strong>Total PRs</strong></td>
                    <td>Count of all active PRs/POs (excludes COMPLETED, CANCELED, REJECTED)</td>
                    <td>Overall workload visibility</td>
                </tr>
                <tr>
                    <td><strong>Urgent PRs</strong></td>
                    <td>Count of PRs/POs with urgencyLevel = "Urgent"</td>
                    <td>Highlight high-priority items</td>
                </tr>
                <tr>
                    <td><strong>Avg Days Open</strong></td>
                    <td>Average days between creation date and current date (or completion date) for active PRs</td>
                    <td>Process efficiency metric</td>
                </tr>
                <tr>
                    <td><strong>Overdue PRs</strong></td>
                    <td>Count of PRs where requiredDate has passed and status not COMPLETED</td>
                    <td>Identify late deliveries</td>
                </tr>
            </table>
        </div>

        <div class="info-box" style="background-color: #e8f5e9; border-left-color: #388e3c;">
            <h3>Purchase Requests/Orders Table</h3>
            
            <h4>Status Filters</h4>
            <ul>
                <li><strong>Default Filter:</strong> SUBMITTED (shows newly submitted PRs)</li>
                <li><strong>Available Filters:</strong>
                    <ul>
                        <li>SUBMITTED - New PRs awaiting procurement review</li>
                        <li>IN_QUEUE - PRs being processed by procurement</li>
                        <li>PENDING_APPROVAL - PRs awaiting approver decision</li>
                        <li>APPROVED - POs awaiting document uploads and order placement</li>
                        <li>ORDERED - POs awaiting delivery</li>
                        <li>COMPLETED - Successfully fulfilled POs</li>
                        <li>REVISION_REQUIRED - PRs awaiting requestor edits</li>
                        <li>CANCELED - Canceled by requestor</li>
                        <li>REJECTED - Rejected by procurement or approver</li>
                    </ul>
                </li>
                <li><strong>Multi-Select:</strong> Can select multiple statuses to view combined results</li>
            </ul>

            <h4>Table Columns</h4>
            <table>
                <tr>
                    <th>Column</th>
                    <th>Content</th>
                    <th>Sortable?</th>
                </tr>
                <tr>
                    <td><strong>PR/PO Number</strong></td>
                    <td>Auto-generated number (ORG-YYYYMM-XXX)</td>
                    <td>âœ“ Yes</td>
                </tr>
                <tr>
                    <td><strong>Description</strong></td>
                    <td>Brief description of purchase request</td>
                    <td>âœ— No</td>
                </tr>
                <tr>
                    <td><strong>Submitted By</strong></td>
                    <td>Requestor name</td>
                    <td>âœ“ Yes</td>
                </tr>
                <tr>
                    <td><strong>Created Date</strong></td>
                    <td>Date PR was submitted</td>
                    <td>âœ“ Yes (default sort)</td>
                </tr>
                <tr>
                    <td><strong>Days Open</strong></td>
                    <td>Business days since creation (highlighted if > 2 days)</td>
                    <td>âœ“ Yes</td>
                </tr>
                <tr>
                    <td><strong>Resubmitted Date</strong></td>
                    <td>Date of last resubmission (if applicable)</td>
                    <td>âœ“ Yes</td>
                </tr>
                <tr>
                    <td><strong>Actions</strong></td>
                    <td>View, Edit (if allowed), Cancel/Delete (if allowed)</td>
                    <td>âœ— No</td>
                </tr>
            </table>

            <h4>Row-Level Actions (Context Menu)</h4>
            <ul>
                <li><strong>View:</strong> All users can view PR/PO details</li>
                <li><strong>Edit:</strong> Available based on status and user role:
                    <ul>
                        <li>Requestor: Can edit own PR in REVISION_REQUIRED status</li>
                        <li>Procurement: Can edit in SUBMITTED or IN_QUEUE status</li>
                        <li>Finance/Admin: Can upload docs in APPROVED status</li>
                        <li>Procurement/Asset Mgmt: Can upload docs in ORDERED status</li>
                    </ul>
                </li>
                <li><strong>Cancel:</strong> Requestor only, up to and including PENDING_APPROVAL</li>
                <li><strong>Resurrect:</strong> Show for CANCELED (requestor) or REJECTED (procurement/admin)</li>
            </ul>
        </div>

        <div class="info-box" style="background-color: #fce4ec; border-left-color: #c2185b;">
            <h3>Sidebar Navigation</h3>
            <table>
                <tr>
                    <th>Menu Item</th>
                    <th>Available To</th>
                    <th>Function</th>
                </tr>
                <tr>
                    <td><strong>Dashboard</strong></td>
                    <td>All users</td>
                    <td>Main dashboard with metrics and PR/PO table</td>
                </tr>
                <tr>
                    <td><strong>New PR</strong></td>
                    <td>All users</td>
                    <td>Opens 3-step PR creation wizard</td>
                </tr>
                <tr>
                    <td><strong>My PRs</strong></td>
                    <td>All users</td>
                    <td>Toggle filter: Shows PRs/POs where user is requestor or approver</td>
                </tr>
                <tr>
                    <td><strong>PRs</strong></td>
                    <td>All users</td>
                    <td>Opens comprehensive PR/PO list view with advanced filtering, search, and table display</td>
                </tr>
                <tr>
                    <td><strong>Admin Dashboard</strong></td>
                    <td>Level 1, 2, 3, 4</td>
                    <td>Access to admin backend tools</td>
                </tr>
            </table>
            
            <p><strong>Note:</strong> The "MY ACTIONS" button is in the header (not sidebar) for personalized filtering to items requiring user's action.</p>
        </div>

        <div class="info-box" style="background-color: #fff3e0; border-left-color: #f57c00;">
            <h3>PR List View (Table View)</h3>
            <p><strong>Access:</strong> Click "PRs" in the sidebar navigation</p>
            
            <h4>Purpose:</h4>
            <ul>
                <li>Comprehensive table view of all PR/PO records user has access to</li>
                <li>Advanced filtering and search capabilities</li>
                <li>Multi-column sorting and pagination</li>
                <li>Ideal for bulk review, analysis, and data export</li>
            </ul>

            <h4>Table Columns:</h4>
            <table>
                <tr>
                    <th>Column</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><strong>PR ID</strong></td>
                    <td>Human-readable PR/PO number (e.g., 251028-0009-1PL-LS) - clickable to view details</td>
                </tr>
                <tr>
                    <td><strong>Created Date</strong></td>
                    <td>Date PR was initially created</td>
                </tr>
                <tr>
                    <td><strong>Days Open</strong></td>
                    <td>Number of days since creation (or until completion)</td>
                </tr>
                <tr>
                    <td><strong>Requestor</strong></td>
                    <td>User who created the PR</td>
                </tr>
                <tr>
                    <td><strong>Department</strong></td>
                    <td>Requesting department</td>
                </tr>
                <tr>
                    <td><strong>Category</strong></td>
                    <td>Project category</td>
                </tr>
                <tr>
                    <td><strong>Status</strong></td>
                    <td>Current status with color-coded chip</td>
                </tr>
                <tr>
                    <td><strong>Total Amount</strong></td>
                    <td>Estimated amount with currency</td>
                </tr>
                <tr>
                    <td><strong>Actions</strong></td>
                    <td>View button to open PR details</td>
                </tr>
            </table>

            <h4>Filtering Options:</h4>
            <ul>
                <li><strong>Search:</strong> Search by PR Number (e.g., 251028-0009-1PL-LS), department, or project category</li>
                <li><strong>Status Filter:</strong> Filter by specific status or "All Statuses"</li>
                <li><strong>Time Period Filter:</strong>
                    <ul>
                        <li>All Time</li>
                        <li>Last 7 Days</li>
                        <li>Last 30 Days</li>
                        <li>Last 90 Days</li>
                    </ul>
                </li>
            </ul>

            <h4>Features:</h4>
            <ul>
                <li><strong>Pagination:</strong> Configurable rows per page (10, 25, 50, 100)</li>
                <li><strong>Respects "My PRs" Toggle:</strong> If enabled, only shows user's PRs/approvals</li>
                <li><strong>Real-time Data:</strong> Fetches latest PR data on page load</li>
                <li><strong>Clickable Rows:</strong> Click any PR to open detailed view</li>
            </ul>

            <h4>Difference from Dashboard:</h4>
            <ul>
                <li><strong>Dashboard:</strong> Status-focused view with quick actions and metrics</li>
                <li><strong>PR List:</strong> Comprehensive table view with advanced filtering for analysis</li>
            </ul>
        </div>

        <div class="info-box" style="background-color: #e1f5fe; border-left-color: #0277bd;">
            <h3>Dashboard Filtering and Search</h3>
            
            <h4>Basic Filter Options:</h4>
            <ul>
                <li><strong>By Status:</strong> Select one or multiple statuses</li>
                <li><strong>By Organization:</strong> Organization selector in header</li>
                <li><strong>By Department:</strong> Filter by requesting department</li>
                <li><strong>My PRs Only:</strong> Filter to show only PRs created by logged-in user</li>
            </ul>

            <h4>Quick Search Bar:</h4>
            <ul>
                <li><strong>Location:</strong> Top right of PR/PO table</li>
                <li><strong>Searchable Fields:</strong>
                    <ul>
                        <li>PR/PO Number</li>
                        <li>Description</li>
                        <li>Requestor name</li>
                        <li>Vendor name</li>
                    </ul>
                </li>
                <li><strong>Real-time Search:</strong> Results update as user types</li>
                <li><strong>Clear Search:</strong> X button to reset</li>
            </ul>

            <h4>Advanced Search Panel:</h4>
            <ul>
                <li><strong>Access:</strong> "Advanced Filters" expandable button below search bar</li>
                <li><strong>Panel Expands:</strong> Shows comprehensive filter options</li>
                <li><strong>Filter Categories:</strong>
                    <ul>
                        <li><strong>Organization:</strong> Multi-select dropdown (for users with multiple org access)</li>
                        <li><strong>Requestor:</strong> Type-ahead dropdown of all users in organization(s)</li>
                        <li><strong>Approver:</strong> Type-ahead dropdown of all approvers (Level 2, 4)
                            <ul>
                                <li>Shows PRs where selected approver was assigned</li>
                                <li>Includes both approved and pending items</li>
                            </ul>
                        </li>
                        <li><strong>Vendor:</strong> Type-ahead dropdown of all vendors
                            <ul>
                                <li>Includes approved and non-approved vendors</li>
                                <li>Shows vendor name and approval status in dropdown</li>
                            </ul>
                        </li>
                        <li><strong>Department:</strong> Type-ahead dropdown of all departments
                            <ul>
                                <li>Filters PRs/POs by requesting department</li>
                                <li>Useful for departmental budget tracking</li>
                            </ul>
                        </li>
                        <li><strong>Site:</strong> Type-ahead dropdown of all sites
                            <ul>
                                <li>Filters PRs/POs by associated site</li>
                                <li>Useful for location-based spending analysis</li>
                            </ul>
                        </li>
                        <li><strong>Vehicle:</strong> Type-ahead dropdown of all vehicles
                            <ul>
                                <li>Filters PRs/POs by associated vehicle</li>
                                <li>Useful for fleet maintenance tracking</li>
                            </ul>
                        </li>
                        <li><strong>Project Category:</strong> Type-ahead dropdown of all project categories
                            <ul>
                                <li>Filters PRs/POs by project type</li>
                                <li>Useful for project-based budget analysis</li>
                            </ul>
                        </li>
                        <li><strong>Expense Type:</strong> Type-ahead dropdown of all expense types
                            <ul>
                                <li>Filters PRs/POs by expense classification</li>
                                <li>Useful for expense category reporting</li>
                            </ul>
                        </li>
                        <li><strong>Date Ranges:</strong>
                            <ul>
                                <li><strong>Created Date:</strong> From [date picker] To [date picker]</li>
                                <li><strong>Required Date:</strong> From [date picker] To [date picker]</li>
                                <li><strong>Last Updated:</strong> From [date picker] To [date picker]</li>
                                <li><strong>Completed Date:</strong> From [date picker] To [date picker] (for COMPLETED PRs)</li>
                            </ul>
                        </li>
                        <li><strong>Amount Range:</strong> Min [input] to Max [input]
                            <ul>
                                <li>Respects organization's currency</li>
                                <li>Searches total PR/PO amount</li>
                            </ul>
                        </li>
                        <li><strong>Urgency:</strong> Radio buttons
                            <ul>
                                <li>All (default)</li>
                                <li>Urgent Only</li>
                                <li>Normal Only</li>
                            </ul>
                        </li>
                        <li><strong>Document Status:</strong> Checkboxes
                            <ul>
                                <li>Has Quotes Uploaded</li>
                                <li>Has Proforma Invoice</li>
                                <li>Has Proof of Payment</li>
                                <li>Has Delivery Documentation</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>

            <h4>Active Filters Display:</h4>
            <ul>
                <li><strong>Filter Chips:</strong> Display below advanced filter panel when active</li>
                <li><strong>Chip Format:</strong> "Requestor: John Doe [X]" with individual remove button</li>
                <li><strong>Examples:</strong>
                    <ul>
                        <li>"Vendor: ABC Corp [X]"</li>
                        <li>"Approver: Jane Smith [X]"</li>
                        <li>"Department: Finance [X]"</li>
                        <li>"Site: Maseru Office [X]"</li>
                        <li>"Vehicle: Fleet-001 [X]"</li>
                        <li>"Project Category: Construction [X]"</li>
                        <li>"Expense Type: Office Supplies [X]"</li>
                        <li>"Created: Jan 1 - Jan 31, 2025 [X]"</li>
                        <li>"Amount: $1,000 - $5,000 [X]"</li>
                    </ul>
                </li>
                <li><strong>Clear All Button:</strong> Removes all active filters at once</li>
                <li><strong>Filter Count Badge:</strong> "Advanced Filters (5)" shows number of active filters</li>
                <li><strong>Persistent:</strong> Filters remain active until user removes them or navigates away</li>
            </ul>

            <h4>Search Results Analytics (NEW - Real-Time Metrics):</h4>
            <ul>
                <li><strong>Location:</strong> Summary bar displayed between filter chips and PR/PO table</li>
                <li><strong>Layout:</strong> Three metric cards displayed horizontally</li>
                <li><strong>Metrics Displayed:</strong>
                    <ul>
                        <li><strong>ğŸ“Š Number of Transactions</strong>
                            <ul>
                                <li>Count of PRs/POs matching current search/filter criteria</li>
                                <li>Example: "45 Transactions"</li>
                                <li>Updates in real-time as filters change</li>
                            </ul>
                        </li>
                        <li><strong>ğŸ’° Total Transaction Value</strong>
                            <ul>
                                <li>Sum of all matching PR/PO amounts</li>
                                <li>Displayed in organization's base currency</li>
                                <li>Example: "LSL 125,450.00"</li>
                                <li>Formatted with thousands separators and currency symbol</li>
                                <li>Note displayed if multiple currencies in results: "(Converted to LSL)"</li>
                            </ul>
                        </li>
                        <li><strong>ğŸ“ˆ Average Transaction Value</strong>
                            <ul>
                                <li>Total value divided by number of transactions</li>
                                <li>Example: "LSL 2,787.78"</li>
                                <li>Useful for identifying spending patterns</li>
                                <li>Displayed in same currency as total</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><strong>Visual Design:</strong>
                    <ul>
                        <li>Card-based layout with subtle borders and shadows</li>
                        <li>Icons for each metric (chart, money, trending)</li>
                        <li>Large, bold numbers for easy scanning</li>
                        <li>Light background color to distinguish from table</li>
                    </ul>
                </li>
                <li><strong>Real-Time Updates:</strong>
                    <ul>
                        <li>Metrics recalculate automatically when filters applied/removed</li>
                        <li>Brief loading indicator during calculation</li>
                        <li>Smooth number transitions for better UX</li>
                    </ul>
                </li>
                <li><strong>Use Cases:</strong>
                    <ul>
                        <li><strong>Department Spending:</strong> Filter by department to see departmental totals</li>
                        <li><strong>Vendor Analysis:</strong> Filter by vendor to see spend concentration</li>
                        <li><strong>Time Period Analysis:</strong> Filter by date range to compare periods</li>
                        <li><strong>Site/Project Budgets:</strong> Track spending by location or project</li>
                        <li><strong>Expense Category Breakdown:</strong> Analyze spending by expense type</li>
                        <li><strong>Vehicle Maintenance:</strong> Track fleet-related spending</li>
                    </ul>
                </li>
            </ul>

            <h4>Filter Combination Logic:</h4>
            <ul>
                <li><strong>AND Logic:</strong> All filters must match (narrows results)</li>
                <li><strong>Example Query:</strong>
                    <ul>
                        <li>Requestor = "John Doe"</li>
                        <li>AND Vendor = "ABC Corp"</li>
                        <li>AND Created Date = "Jan 2025"</li>
                        <li>AND Status = "COMPLETED"</li>
                        <li>Result: All completed PRs/POs by John from ABC Corp in Jan 2025</li>
                    </ul>
                </li>
                <li><strong>Organization Multi-Select Exception:</strong> OR logic within organizations only
                    <ul>
                        <li>Example: Show PRs from Org A OR Org B (but still match other filters)</li>
                    </ul>
                </li>
                <li><strong>Results Update:</strong> Real-time as each filter is applied/removed</li>
                <li><strong>Result Count:</strong> Shows "X results" or "Showing 25 of 150 results"</li>
            </ul>

            <h4>Export Functionality:</h4>
            <ul>
                <li><strong>Export Button:</strong> Above PR/PO table, right side</li>
                <li><strong>Icon:</strong> Download icon with "Export" text</li>
                <li><strong>Exports:</strong> Currently displayed/filtered results only</li>
                <li><strong>Format Options:</strong>
                    <ul>
                        <li>CSV (comma-separated values)</li>
                        <li>Excel (xlsx format)</li>
                    </ul>
                </li>
                <li><strong>Export Includes:</strong>
                    <ul>
                        <li><strong>Analytics Summary (at top of file):</strong>
                            <ul>
                                <li>Number of Transactions</li>
                                <li>Total Transaction Value</li>
                                <li>Average Transaction Value</li>
                                <li>Export date/time and user</li>
                                <li>Applied filters summary</li>
                            </ul>
                        </li>
                        <li>All table columns (PR number, description, status, dates, etc.)</li>
                        <li>Additional metadata (created by user, last updated, approver names)</li>
                        <li>Reference data (department, site, vehicle, project category, expense type)</li>
                        <li>Line items (expanded in separate rows or second sheet)</li>
                        <li>Document status (has quotes, proforma, PoP, etc.)</li>
                        <li>Approval history (approver names, approval dates, notes)</li>
                        <li>Vendor information</li>
                    </ul>
                </li>
                <li><strong>Permissions:</strong> Respects user's organization access (only exports what they can see)</li>
                <li><strong>Filename Format:</strong> "PRs_Export_[OrgName]_[YYYY-MM-DD].csv"</li>
                <li><strong>Row Limit:</strong> Max 10,000 rows (with warning if exceeded)</li>
            </ul>

            <h4>Sorting and Display Order:</h4>
            <ul>
                <li><strong>Primary Sort:</strong> Urgency Level
                    <ul>
                        <li><strong>Group 1 (Top):</strong> All URGENT flagged PRs/POs (oldest first within group)</li>
                        <li><strong>Group 2 (Bottom):</strong> All NORMAL priority PRs/POs (oldest first within group)</li>
                    </ul>
                </li>
                <li><strong>Secondary Sort:</strong> Days Open (descending - longest outstanding first)</li>
                <li><strong>Visual Grouping:</strong> Urgent items visually separated from normal items (divider line or shading)</li>
                <li><strong>Manual Sort:</strong> Users can click column headers to override default sort</li>
                <li><strong>Sortable Columns:</strong> PR Number, Submitted By, Created Date, Days Open, Resubmitted Date</li>
            </ul>
        </div>

        <div class="info-box" style="background-color: #ffebee; border-left-color: #c62828;">
            <h3>Urgency Flag Management</h3>
            
            <h4>Initial Urgency Setting:</h4>
            <ul>
                <li><strong>Set by Requestor:</strong> During PR creation (cannot be changed by requestor later)</li>
                <li><strong>Options:</strong> "Normal" or "Urgent"</li>
                <li><strong>Cannot be changed:</strong> Requestor cannot edit urgency after submission (except in REVISION_REQUIRED status)</li>
            </ul>

            <h4>Who Can Change Urgency Flag:</h4>
            <table>
                <tr>
                    <th>From Status</th>
                    <th>Who Can Change to Urgent</th>
                    <th>Purpose</th>
                </tr>
                <tr>
                    <td>SUBMITTED, IN_QUEUE</td>
                    <td>None - Urgency locked at requestor's setting</td>
                    <td>Maintain original priority</td>
                </tr>
                <tr>
                    <td><strong>PENDING_APPROVAL onward</strong></td>
                    <td><strong>Procurement (Level 3)</strong></td>
                    <td>Escalate priority for critical items</td>
                </tr>
                <tr>
                    <td><strong>APPROVED onward (PO)</strong></td>
                    <td><strong>Procurement (Level 3) OR Approvers (Level 2, 4)</strong></td>
                    <td>Expedite order processing and delivery</td>
                </tr>
                <tr>
                    <td>Any Status</td>
                    <td><strong>Administrator (Level 1)</strong></td>
                    <td>Override capability</td>
                </tr>
            </table>

            <h4>Important Notes:</h4>
            <ul>
                <li><strong>2 Business Days â‰  Auto-Urgent:</strong> Items pending > 2 business days do NOT automatically become urgent</li>
                <li><strong>2 Business Days Effect:</strong> Changes reminder frequency only (once daily â†’ twice daily)</li>
                <li><strong>Urgency Flag:</strong> Separate from age-based reminder escalation</li>
                <li><strong>Manual Only:</strong> Urgency flag is manually set/changed, never automatic</li>
                <li><strong>Visual Impact:</strong> Urgent items displayed at top of list, highlighted in red/orange</li>
                <li><strong>Notification Impact:</strong> Subject line includes "URGENT:" prefix</li>
            </ul>
        </div>

        <div class="info-box" style="background-color: #fff9c4; border-left-color: #f9a825;">
            <h3>Visual Indicators and Alerts</h3>
            
            <h4>Color Coding:</h4>
            <ul>
                <li><strong>Urgent PRs:</strong> Highlighted in red/orange</li>
                <li><strong>Overdue PRs:</strong> Red warning icon if past required date</li>
                <li><strong>Days Open > 2:</strong> Yellow/orange background</li>
                <li><strong>Days Open > 5:</strong> Red background</li>
            </ul>

            <h4>Icons and Badges:</h4>
            <ul>
                <li>âš ï¸ <strong>Warning:</strong> Overdue or urgent</li>
                <li>ğŸ”” <strong>Notification:</strong> New comment or status change</li>
                <li>ğŸ“ <strong>Attachments:</strong> Has file attachments</li>
                <li>ğŸ‘¥ <strong>Dual Approval:</strong> Requires two approvers</li>
                <li>âœ“âœ“ <strong>Both Approved:</strong> Both approvers have approved (dual-approval)</li>
                <li>âœ“ <strong>One Approved:</strong> First approver approved, awaiting second</li>
            </ul>
        </div>

        <div class="info-box" style="background-color: #c8e6c9; border-left-color: #388e3c;">
            <h3>Dashboard Permissions by User Level</h3>
            
            <table>
                <tr>
                    <th>User Level</th>
                    <th>Can See</th>
                    <th>Can Do</th>
                </tr>
                <tr>
                    <td><strong>Level 1 (Admin)</strong></td>
                    <td>All PRs/POs across all organizations</td>
                    <td>All actions, admin dashboard access, edit anything</td>
                </tr>
                <tr>
                    <td><strong>Level 2 (Senior Approver)</strong></td>
                    <td>All PRs/POs in assigned organizations</td>
                    <td>Approve any value PR, view admin dashboard (read-only)</td>
                </tr>
                <tr>
                    <td><strong>Level 3 (Procurement)</strong></td>
                    <td>All PRs/POs in assigned organizations</td>
                    <td>Edit PRs, process workflow, upload docs, view/edit admin dashboard</td>
                </tr>
                <tr>
                    <td><strong>Level 4 (Finance/Admin)</strong></td>
                    <td>All PRs/POs in assigned organizations</td>
                    <td>Approve low-value PRs, upload docs, process payments, view admin dashboard</td>
                </tr>
                <tr>
                    <td><strong>Level 5 (Requester)</strong></td>
                    <td>Own PRs + All PRs in organization (view-only for others)</td>
                    <td>Create PRs, edit own PRs in REVISION_REQUIRED, cancel own PRs</td>
                </tr>
                <tr>
                    <td><strong>Asset Management Dept</strong></td>
                    <td>All POs in ORDERED/COMPLETED status in assigned organizations</td>
                    <td>Upload delivery docs in ORDERED, move to COMPLETED</td>
                </tr>
            </table>
        </div>

        <div class="info-box" style="background-color: #e1f5fe; border-left-color: #0277bd;">
            <h3>Dashboard Personalization and Quick Filters</h3>
            
            <h4>MY ACTIONS Button (Personalized Action Filter)</h4>
            <ul>
                <li><strong>Not Available For:</strong> Procurement users (Level 3) - they see all PRs/POs in their org already</li>
                <li><strong>Available For:</strong> Requestors, Approvers, Finance/Admin, Asset Management</li>
                <li><strong>What it Filters:</strong>
                    <ul>
                        <li><strong>Requestors (Level 5):</strong> Own PRs in REVISION_REQUIRED status only</li>
                        <li><strong>Approvers (Level 2, 4):</strong> PRs in PENDING_APPROVAL assigned to them specifically</li>
                        <li><strong>Finance/Admin (Level 4):</strong> POs in APPROVED status needing documents/actions</li>
                        <li><strong>Asset Management Dept:</strong> POs in ORDERED status needing delivery documentation</li>
                    </ul>
                </li>
                <li><strong>Display:</strong> Same urgent-first, oldest-first ordering applies</li>
                <li><strong>Badge:</strong> Shows count of items requiring action</li>
                <li><strong>Toggle Off:</strong> Click button again to return to full organization view</li>
            </ul>

            <h4>My PRs Sidebar Filter</h4>
            <ul>
                <li><strong>Available To:</strong> All users</li>
                <li><strong>Filter:</strong> Shows PRs/POs where user is:
                    <ul>
                        <li>The requestor (created by user), OR</li>
                        <li>Listed as first approver (approver field), OR</li>
                        <li>Listed as second approver (approver2 field)</li>
                    </ul>
                </li>
                <li><strong>All Statuses:</strong> Includes COMPLETED, CANCELED, REJECTED</li>
                <li><strong>Full History:</strong> Complete lifecycle visibility for user's requests and approvals</li>
                <li><strong>Ordering:</strong> Same urgent-first, oldest-first ordering</li>
            </ul>

            <h4>Why Procurement Doesn't Have MY ACTIONS:</h4>
            <ul>
                <li>Procurement is involved in all PRs/POs throughout the workflow</li>
                <li>No meaningful down-selection possible - they need to see everything</li>
                <li>Can use status filters instead (SUBMITTED, IN_QUEUE, APPROVED, ORDERED)</li>
                <li>Procurement always CC'd on all notifications anyway</li>
            </ul>
        </div>

        <div class="navigation" style="margin-top: 30px;">
            <a href="PR_Flow_Master_Overview.html">â† Workflow Overview</a>
            <a href="PR_System_Admin_Backend.html">Admin Backend â†’</a>
            <a href="PR_System_Objects.html">Object Definitions â†’</a>
        </div>
    </div>
</body>
</html>

